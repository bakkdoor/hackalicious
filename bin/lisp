#!/usr/bin/env rbx

require(File.expand_path("../../lib/lisp", __FILE__))

root_context = Lisp::RootContext.new

Dir.glob(File.expand_path("../../kernel/*.lisp", __FILE__)).each do |f|
  Lisp::Parser.parse_file(f).eval(root_context)
end

if file = ARGV[0]
  ast = Lisp::Parser.parse_file(file)
  # puts ast.inspect
  ast.eval(root_context)
end
